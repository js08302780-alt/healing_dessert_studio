<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Healing Dessert Studioï½œç™‚ç™’ç³»ç”œé»å·¥ä½œå®¤</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style2.css">
</head>

<body>

<!-- âœ… BGMï¼šç„¡æ§åˆ¶åˆ—ï¼Œloop -->
<audio id="bgm" src="bgm.mp3" loop preload="auto" playsinline></audio>

<aside>
  <h2>Healing Dessert Studio</h2>
  <p class="slogan">å¥¶æ²¹ç”œé»ãƒ»ç™‚ç™’æ—¥å¸¸</p>

  <nav id="sideNav">
    <a href="index.html" data-page="index.html">ğŸ  é¦–é </a>
    <a href="about.html" data-page="about.html">ğŸ“– å…¬å¸èµ·æº</a>
    <a href="giftbox.html" data-page="giftbox.html">ğŸ ç”œé»ç¦®ç›’</a>
    <a href="mood.html" data-page="mood.html">ğŸ˜Š å¿ƒæƒ…é¸å–®</a>
    <a href="colors.html" data-page="colors.html">ğŸŒˆ è‰²å½©ç™‚ç™’</a>
    <a href="cakes.html" data-page="cakes.html">ğŸ° å¥¶æ²¹è›‹ç³•</a>
    <a href="cookies.html" data-page="cookies.html">ğŸª å¥¶æ²¹é¤…ä¹¾</a>
    <a href="pastries.html" data-page="pastries.html">ğŸ§ å¥¶æ²¹æ´¾å¡”</a>
    <a href="drinks.html" data-page="drinks.html">â˜• å¥¶æ²¹é£²å“</a>
    <a href="workshop.html" data-page="workshop.html">ğŸ“š å·¥ä½œåŠé ç´„</a>
    <a href="order.html" data-page="order.html">ğŸ›’ ç·šä¸Šè¨‚è³¼</a>
    <a href="source.html" data-page="source.html">ğŸŒ¿ å“è³ªä¾†æº</a>
    <a href="award.html" data-page="award.html">ğŸ† æ¦®ç²çé …</a>
    <a href="trace.html" data-page="trace.html">ğŸŒ¾ ä¾›æ‡‰å•†æº¯æº</a>
    <a href="report.html" data-page="report.html">ğŸ“‹ æª¢é©—å ±å‘Š</a>
    <a href="contactus.html" data-page="contactus.html">âœ‰ï¸ è¯ç¹«æˆ‘å€‘</a>
  </nav>
</aside>

<div class="container">

<header>
  <h1>Healing Dessert Studio</h1>
  <p class="tagline">ç”¨ä¸€ä»½ç”œé»ï¼Œæ…¢æ…¢ç…§é¡§ä½ çš„å¿ƒ</p>
</header>

<!-- âœ… é€™è£¡åŠ ä¸€å€‹å¯æ›¿æ›å…§å®¹çš„å®¹å™¨ï¼šä¹‹å¾Œé»é¸å–®å°±æ›é€™è£¡ï¼Œä¸æ›é  -->
<main id="appMain">

  <!-- ä½ åŸæœ¬çš„é¦–é å…§å®¹ ê·¸ëŒ€ë¡œ -->
  <section class="block">
    <h1>ç™‚ç™’ç³»ç”œé»å“ç‰Œ</h1>
    <div class="content">
      Healing Dessert Studio æ˜¯ä¸€é–“ä»¥ã€Œæƒ…ç·’ç™‚ç™’ã€ç‚ºæ ¸å¿ƒçš„ç”œé»å·¥ä½œå®¤ï¼Œ
      å¸Œæœ›é€éæº«æŸ”çš„å‘³é“èˆ‡è‰²å½©ï¼Œé™ªä¼´æ¯ä¸€æ®µéœ€è¦è¢«å®‰æ”¾çš„æ—¥å¸¸æ™‚å…‰ã€‚
    </div>
  </section>

  <section class="cards">
    <div class="card">
      <h2>å¿ƒæƒ…é¸å–®</h2>
      <p>ä¾ç…§æƒ…ç·’ç‹€æ…‹ï¼Œé¸æ“‡é©åˆä½ çš„ç”œé»ã€‚</p>
      <a href="mood.html" data-page="mood.html">å‰å¾€æŸ¥çœ‹ â†’</a>
    </div>
    <div class="card">
      <h2>ç†±é–€ç”œé»</h2>
      <p>æœ€å—æ­¡è¿çš„ç¶“å…¸ç™‚ç™’ç”œé»ã€‚</p>
      <a href="cakes.html" data-page="cakes.html">å‰å¾€æŸ¥çœ‹ â†’</a>
    </div>
    <div class="card">
      <h2>ç”œé»å·¥ä½œåŠ</h2>
      <p>é€éæ‰‹ä½œï¼Œè®“å¿ƒæ…¢æ…¢éœä¸‹ä¾†ã€‚</p>
      <a href="workshop.html" data-page="workshop.html">ç«‹å³é ç´„ â†’</a>
    </div>
  </section>

</main>

<footer>
  <p>Â© Healing Dessert Studio 2025</p>
</footer>

</div>

<!-- âœ… ä½ çš„ bgm.jsï¼ˆä½ èªªä½ å·²æ”¹å¥½ï¼‰ -->
<script src="bgm.js"></script>

<!-- âœ… å–®é è¼‰å…¥å™¨ï¼šæ””æˆªé»é¸å–®ï¼Œä¸è·³é ï¼ŒæŠ“å…¶ä»–é é¢çš„ <main> å…§å®¹æ›é€²ä¾† -->
<script>
  const mainEl = document.getElementById('appMain');
  const navEl = document.getElementById('sideNav');

  function setActiveLink(targetPage) {
    const links = navEl.querySelectorAll('a[data-page]');
    links.forEach(a => {
      if (a.dataset.page === targetPage) a.style.backgroundColor = '#ffe8d8';
      else a.style.backgroundColor = '';
    });
  }

  async function loadPage(page) {
    // é¦–é ï¼šç›´æ¥å›åˆ°åŸæœ¬é¦–é å…§å®¹ï¼ˆä¸ fetchï¼‰
    if (page === 'index.html') {
      window.history.pushState({ page }, '', 'index.html');
      setActiveLink('index.html');
      return;
    }

    try {
      const res = await fetch(page, { cache: 'no-store' });
      if (!res.ok) throw new Error('HTTP ' + res.status);

      const html = await res.text();
      const doc = new DOMParser().parseFromString(html, 'text/html');

      // âœ… æŠŠå°æ–¹é é¢çš„ <main> æŠ“å‡ºä¾†ï¼ˆä½ å…¶ä»–é é¢å¦‚æœä¹Ÿæ˜¯ç”¨ <main> åŒ…å…§å®¹ï¼Œé€™æ¨£å°±æœƒæˆåŠŸï¼‰
      const newMain = doc.querySelector('main');
      if (!newMain) throw new Error('æ‰¾ä¸åˆ° <main>ï¼Œè«‹ç¢ºèª ' + page + ' æœ‰ <main> åŒ…å…§å®¹');

      mainEl.innerHTML = newMain.innerHTML;

      window.history.pushState({ page }, '', '#' + page);
      setActiveLink(page);

      // æ¯æ¬¡æ›å…§å®¹å¾Œï¼Œæ²åˆ°ä¸Šé¢æ¯”è¼ƒèˆ’æœ
      window.scrollTo({ top: 0, behavior: 'smooth' });

    } catch (err) {
      mainEl.innerHTML = `
        <section class="block">
          <h1>é é¢è¼‰å…¥å¤±æ•—</h1>
          <div class="content">æ‰¾ä¸åˆ°æˆ–ç„¡æ³•è¼‰å…¥ï¼š${page}<br>(${err.message})</div>
        </section>
      `;
    }
  }

  // æ””æˆªå´é‚Šé¸å–® & å¡ç‰‡é€£çµï¼ˆæ‰€æœ‰æœ‰ data-page çš„ï¼‰
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[data-page]');
    if (!a) return;

    e.preventDefault();
    const page = a.dataset.page;
    loadPage(page);
  });

  // æ”¯æ´ä¸Šä¸€é /ä¸‹ä¸€é 
  window.addEventListener('popstate', (e) => {
    const page = (e.state && e.state.page) ? e.state.page : (location.hash ? location.hash.slice(1) : 'index.html');
    loadPage(page);
  });

  // å¦‚æœä½¿ç”¨è€…ç›´æ¥é€² index.html#about.html é€™ç¨®ï¼Œä¹Ÿèƒ½è¼‰å…¥
  window.addEventListener('DOMContentLoaded', () => {
    const page = location.hash ? location.hash.slice(1) : 'index.html';
    if (page && page !== 'index.html') loadPage(page);
    setActiveLink(page || 'index.html');
  });
</script>

</body>
</html>
